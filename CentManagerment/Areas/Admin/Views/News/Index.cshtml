@model PagedList.IPagedList<CentManagerment.BU.DTO.NewsDTO>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Tất cả bài viết tin tức";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<section class="posts" id="posts">
    <div class="content-wrapper">
        <div class="content-header content-header-wrap">
            <h1 class="fleft">Tất cả bài viết</h1>
            <div class="fright nav-right"><a href="#"><i class="fa fa-tachometer"></i><span>Home</span></a><i class="fa fa-angle-right"></i><a href="/admin/news/status-news/all-news-1"><span>Tin tức</span></a></div>
            <div class="clear-fix"></div>
        </div>
        <!--.content-header-wrap-->
        <div class="section-top">
            <div class="section-top__content">
                @*@Html.Partial("_LayoutMenuTinTuc")*@
                <div class="row-section">
                    <div class="section-top__control">
                        @using (Html.BeginForm("TatCaBaiViet", "TinTucAdmin", FormMethod.Post))
                        {
                            @*<select class="padding border--base" id="danhmuc" name="danhmuc">
                                    <option value="">Chọn danh mục</option>
                                    @foreach (var dm in ListDMTinTuc)
                                    {
                                        <option value="@dm.Id">@dm.TenChuDe</option>
                                    }
                                </select>
                                <script>
                                    $('#danhmuc > option[value="@ViewBag.IdDanhMuc"]').attr('selected', 'selected');
                                </script>
                                <select class="padding border--base" id="personpost" name="personpost">
                                    <option value="">Người đăng</option>
                                    @foreach (var mn in ListManager)
                                    {
                                        <option value="@mn.Id">@mn.UserName</option>
                                    }
                                </select>
                                <script>
                                    $('#personpost > option[value="@ViewBag.IdPerson"]').attr('selected', 'selected');
                                </script>*@
                            <div class="section-top__control--fromdate">
                                <span>
                                    Từ ngày
                                    <div class="fromDate">
                                        <i class="fa fa-calendar"></i>
                                        <input class="padding border--base" id="datepicker1" type="text" name="datepicker1" value="@ViewBag.FromDate" />
                                    </div>
                                </span>
                            </div>
                            <div class="section-top__control--todate">
                                <span>
                                    Đến ngày
                                    <div class="toDate">
                                        <i class="fa fa-calendar"></i>
                                        <input class="padding border--base" id="datepicker2" type="text" name="datepicker2" value="@ViewBag.ToDate" />
                                    </div>
                                </span>
                            </div>
                            <input class="submit-control border--base" type="submit" value="Lọc" id="submit-loc" />
                        }
                    </div>
                </div>
                <div class="row-section">
                    @*<div class="section-top__action" style="display:inline-block">
                            <select class="padding border--base" id="action" name="action">
                                <option value="">Tác vụ</option>
                                <option value="@Viad.Common.Enum.TinTuc.ThungRac">Bỏ vào thùng rác</option>
                            </select>
                            <input class="submit-action border--base" type="submit" value="Áp dụng" id="submit-tacvu" />
                        </div>*@
                    @using (Html.BeginForm("TatCaBaiViet", "TinTucAdmin", FormMethod.Post, new { @style = "display: inline-block" }))
                    {
                        <input class="border--base" type="search" placeholder="Tìm kiếm..." name="search" value="@ViewBag.SearchText" />
                        <input class="submit-search border--base" type="submit" value="Tìm tin tức" />
                    }
                    <span class="total-file"><strong>Tổng số: </strong><span class="total-file2">@ViewBag.NumTinTucAll </span>mục</span>
                </div>
            </div>
        </div>

        <div class="posts__content section-table">
            <table>
                <tr>
                    <th>
                        <input class="total-checkbox" id="total-checkbox" type="checkbox" value="total" />
                    </th>
                    <th>Mã tin tức</th>
                    <th>Tiêu đề tin</th>
                    <th>Ngày đăng</th>
                    <th>Người đăng</th>
                    <th>Trạng thái</th>
                    <th>Tùy chọn</th>
                </tr>
                @foreach (var tt in Model)
                {
                    <tr>
                        <td id="idtt-@tt.NewsId">@tt.NewsId</td>
                        <td><a href="#" target="_blank">@tt.NewsTitle</a></td>
                        <td><abbr title="07/12/2017">@tt.NewsPostDate.Value.ToString("dd/MM/yyyy")</abbr></td>
                        <td>@tt.NewsUserID</td>
                        @*<td>@tt.TenTrangThai</td>*@
                        <td>
                            <span class="icon-menu">
                                <i class="fa fa-plus-circle"></i>
                                <ul>
                                    <li>Sửa nhanh</li>
                                    <li><a href="/admin/news/fix-news/news-@tt.NewsId">Chỉnh sửa</a></li>
                                    <li class="thungrac" id="xoa-@tt.NewsId">Xóa</li>
                                </ul>
                            </span>
                        </td>
                    </tr>
                    @*<td class="row-edit white disabled" colspan="9">
                            <div class="fixed text-left">
                                <h3>Sửa nhanh</h3>
                                <div class="fleft col-66">
                                    <div class="fixed-row">
                                        <div class="fixed-row__text">
                                            <p>Mã tin</p>
                                        </div>
                                        <div class="fixed-row__input"><span>@tt.Id</span></div>
                                        <div class="clear-fix"></div>
                                    </div>
                                    <div class="fixed-row">
                                        <div class="fixed-row__text">
                                            <p>Tiêu đề</p>
                                        </div>
                                        <div class="fixed-row__input">
                                            <input type="text" value="@tt.TieuDe" required="required" id="edit-title-@tt.Id" />
                                        </div>
                                        <div class="clear-fix"></div>
                                    </div>
                                    <div class="fixed-row">
                                        <div class="fixed-row__text">
                                            <p>Đường dẫn tĩnh</p>
                                        </div>
                                        <div class="fixed-row__input">
                                            @*<input type="text" value="Cham-soc-cay-tieu-canh" required="required" />
                                        </div>
                                        <div class="clear-fix"></div>
                                    </div>
                                    <div class="fixed-row">
                                        <div class="fixed-row__text">
                                            <p>Trạng thái</p>
                                        </div>
                                        <div class="fixed-row__input">
                                            <select name="" id="status-@tt.Id">
                                                <option value="1">Đã xuất bản</option>
                                                <option value="6">Bị Ẩn</option>
                                                <option value="7">Bản nháp</option>
                                                <option value="4">Thùng rác</option>
                                            </select>
                                            <script>
                                                    $('#status-@tt.Id > option[value="@tt.TrangThaiBaiViet"]').attr('selected', 'selected');
                                            </script>
                                        </div>
                                        <div class="clear-fix"></div>
                                    </div>
                                    <div class="fixed-row">
                                        <div class="fixed-row__text">
                                            <p>Loại tin</p>
                                        </div>
                                        <div class="fixed-row__input">
                                            <select name="theloaitin" id="theloaitin-@tt.Id">
                                                <option value="0">Thường</option>
                                                <option value="1">Nổi bật</option>
                                            </select>
                                            <script>
                                                    $('#theloaitin-@tt.Id > option[value="@tt.IdLoaiTin"]').attr('selected', 'selected');
                                            </script>
                                        </div>
                                        <div class="clear-fix"></div>
                                    </div>
                                </div>
                                <div class="fleft col-33">
                                    <i>Danh mục tin rao</i>
                                    <div class="fixed-box checkboxdanhmuc checkboxdanhmuc-@tt.Id">
                                        @{
                                            var listDanhMucByIdTT = new TinTucManager().GetListDanhMucByIdTT(tt.Id);
                                            foreach (var dmtt in ListDMTinTuc)
                                            {
                                                if (countListDM < listDanhMucByIdTT.Count && dmtt.Id == listDanhMucByIdTT[countListDM].IdDanhMuc)
                                                {
                                                    <p>
                                                        <input id="checkbox_@stt" type="checkbox" value="@dmtt.Id" checked="checked" />
                                                        <label for="checkbox_@stt">@dmtt.TenChuDe</label>
                                                    </p>
                                                    countListDM++;
                                                }
                                                else
                                                {
                                                    <p>
                                                        <input id="checkbox_@stt" type="checkbox" value="@dmtt.Id" />
                                                        <label for="checkbox_@stt">@dmtt.TenChuDe</label>
                                                    </p>
                                                }
                                                stt++;
                                            }
                                            countListDM = 0;
                                        }

                                    </div>
                                </div>
                                <div class="clear-fix"></div>
                                <div class="fixed__button text-right">
                                    <input type="button" value="Hủy" />
                                    <input type="submit" value="Cập nhật" class="updatenews" id="news-@tt.Id" />
                                </div>
                            </div>
                        </td>*@
                }
            </table>
            @Html.PagedListPager(Model, page => Url.Action("Index", new { page, searchString = ViewBag.searchString }))
            @*<div class="posts__bottom">
                    <div class="list-rent__bottom--content section-buttons text-right">
                        @{
                            int pagePrev = 0;
                            if (Convert.ToInt32(ViewBag.Page) > 0)
                            {
                                pagePrev = ViewBag.Page - 1;
                            }
                            int pageNext = ViewBag.Page + 1;
                        }
                        <span class="total-file">@ViewBag.NumTinTucAll mục</span>
                        <button><a href="/admin/news/status-news/all-news-1"><i class="fa fa-angle-double-left"></i></a></button>
                        <button><a href="/admin/news/status-news/all-news-@pagePrev"><i class="fa fa-angle-left"></i></a></button>
                        <span>@ViewBag.Page trên @ViewBag.NumPage</span>
                        <button><a href="/admin/news/status-news/all-news-@pageNext"><i class="fa fa-angle-right"></i></a></button>
                        <button><a href="/admin/news/status-news/all-news-@ViewBag.NumPage"><i class="fa fa-angle-double-right"></i></a></button>
                    </div>
                </div>*@
        </div>
    </div>
</section>

